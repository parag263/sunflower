<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>For You</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Poppins:wght@300;400;500&display=swap"
      rel="stylesheet"
    />
    <style>
      *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

      body {
        background: #000;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        position: relative;
        opacity: 0;
        animation: fadeBodyIn 1s ease-out 0.2s forwards;
      }

      @keyframes fadeBodyIn {
        to { opacity: 1; }
      }

      /* Ambient floating hearts */
      .heart-bg {
        position: fixed; inset: 0;
        pointer-events: none; overflow: hidden;
      }

      .heart-bg span {
        position: absolute;
        bottom: -20px;
        color: rgba(255, 60, 100, 0.06);
        animation: floatUp linear infinite;
      }

      @keyframes floatUp {
        0% {
          opacity: 0;
          transform: translateY(0) translateX(0) scale(0.6);
        }
        10% { opacity: 1; }
        80% { opacity: 0.5; }
        100% {
          opacity: 0;
          transform: translateY(-110vh) translateX(30px) scale(0.3) rotate(20deg);
        }
      }

      /* Center content */
      .center {
        position: relative;
        z-index: 2;
        text-align: center;
        min-height: 160px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 24px;
      }

      .flag {
        font-size: 2.2rem;
        margin-bottom: 10px;
        opacity: 0;
        transition: opacity 0.4s ease;
      }

      .main-text {
        font-family: "Great Vibes", cursive;
        font-size: clamp(2.2rem, 5.5vw, 3.8rem);
        color: #fff;
        margin: 0 0 8px;
        text-shadow: 0 0 30px rgba(255, 100, 150, 0.5), 0 0 60px rgba(255, 60, 100, 0.2);
        min-height: 1.3em;
        transition: opacity 0.4s ease, font-size 0.6s ease, color 0.6s ease, text-shadow 0.6s ease;
      }

      .lang-label {
        font-family: "Poppins", sans-serif;
        font-size: 0.72rem;
        letter-spacing: 0.18em;
        color: rgba(255, 180, 210, 0.45);
        text-transform: uppercase;
        transition: opacity 0.3s ease, color 0.5s ease;
        margin: 0;
      }

      .counter {
        font-family: "Poppins", sans-serif;
        font-size: 0.55rem;
        color: rgba(255, 255, 255, 0.12);
        margin-top: 28px;
        letter-spacing: 0.1em;
        transition: all 0.5s ease;
      }

      /* Skip hint */
      .skip {
        position: fixed;
        bottom: 22px;
        font-family: "Poppins", sans-serif;
        font-size: 0.55rem;
        color: rgba(255, 255, 255, 0.12);
        cursor: pointer;
        z-index: 10;
        transition: color 0.3s ease;
      }

      .skip:hover {
        color: rgba(255, 255, 255, 0.35);
      }

      /* Page exit */
      body.exit {
        animation: fadeOut 0.8s ease-in forwards;
      }

      @keyframes fadeOut {
        to { opacity: 0; }
      }

      /* Soft red pulse glow behind text at end */
      .final-glow {
        position: fixed;
        inset: 0;
        pointer-events: none;
        background: radial-gradient(ellipse at center, rgba(255, 50, 90, 0.08), transparent 65%);
        opacity: 0;
        transition: opacity 1.5s ease;
        z-index: 1;
      }

      .final-glow.active {
        opacity: 1;
      }
    </style>
  </head>
  <body>
    <div class="final-glow" id="glow"></div>

    <div class="heart-bg" id="hearts" aria-hidden="true"></div>

    <div class="center">
      <div class="flag" id="flag"></div>
      <p class="main-text" id="text"></p>
      <p class="lang-label" id="lang"></p>
      <p class="counter" id="counter"></p>
    </div>

    <div class="skip" id="skip">tap to skip</div>

    <script>
      // Generate floating hearts
      const heartContainer = document.getElementById("hearts");
      for (let i = 0; i < 40; i++) {
        const h = document.createElement("span");
        h.textContent = "♥";
        const dur = 10 + Math.random() * 12;
        h.style.left = Math.random() * 100 + "%";
        h.style.fontSize = (0.4 + Math.random() * 0.9) + "rem";
        h.style.animationDuration = dur + "s";
        h.style.animationDelay = (Math.random() * 8) + "s";
        heartContainer.appendChild(h);
      }

      const languages = [
        { lang: "French",     text: "Je t'aime",        flag: "\u{1F1EB}\u{1F1F7}" },
        { lang: "Spanish",    text: "Te quiero",         flag: "\u{1F1EA}\u{1F1F8}" },
        { lang: "Japanese",   text: "\u611B\u3057\u3066\u308B", flag: "\u{1F1EF}\u{1F1F5}" },
        { lang: "Korean",     text: "\uC0AC\uB791\uD574", flag: "\u{1F1F0}\u{1F1F7}" },
        { lang: "Italian",    text: "Ti amo",            flag: "\u{1F1EE}\u{1F1F9}" },
        { lang: "German",     text: "Ich liebe dich",    flag: "\u{1F1E9}\u{1F1EA}" },
        { lang: "Portuguese", text: "Eu te amo",         flag: "\u{1F1E7}\u{1F1F7}" },
        { lang: "Arabic",     text: "\u0623\u062D\u0628\u0643", flag: "\u{1F1F8}\u{1F1E6}" },
        { lang: "Mandarin",   text: "\u6211\u7231\u4F60", flag: "\u{1F1E8}\u{1F1F3}" },
        { lang: "Turkish",    text: "Seni seviyorum",    flag: "\u{1F1F9}\u{1F1F7}" },
        { lang: "Swahili",    text: "Nakupenda",         flag: "\u{1F1F0}\u{1F1EA}" },
        { lang: "Odia",       text: "\u0B2E\u0B41\u0B01 \u0B24\u0B41\u0B2E\u0B15\u0B41 \u0B2D\u0B32 \u0B2A\u0B3E\u0B0F", flag: "\u{1F1EE}\u{1F1F3}" },
        { lang: "Hindi",      text: "\u092E\u0948\u0902 \u0924\u0941\u092E\u0938\u0947 \u092A\u094D\u092F\u093E\u0930 \u0915\u0930\u0924\u093E \u0939\u0942\u0901", flag: "\u{1F1EE}\u{1F1F3}" },
        { lang: "English",    text: "I Love You",        flag: "\u2764" },
      ];

      const flagEl   = document.getElementById("flag");
      const mainText = document.getElementById("text");
      const langLabel= document.getElementById("lang");
      const counter  = document.getElementById("counter");
      const glow     = document.getElementById("glow");
      const skipBtn  = document.getElementById("skip");

      let currentIdx = 0;
      let cancelled = false;

      const goToNextPage = () => {
        try { localStorage.setItem("valentine-intro-seen", "true"); } catch(e) {}
        document.body.classList.add("exit");
        setTimeout(() => { window.location.href = "index.html"; }, 850);
      };

      skipBtn.addEventListener("click", () => {
        cancelled = true;
        goToNextPage();
      });

      const typeText = (text, el, speed) => {
        return new Promise((resolve) => {
          let i = 0;
          el.textContent = "";
          const tick = () => {
            if (cancelled) { resolve(); return; }
            if (i <= text.length) {
              el.textContent = text.slice(0, i);
              i++;
              setTimeout(tick, speed);
            } else {
              resolve();
            }
          };
          tick();
        });
      };

      const showNext = async () => {
        if (cancelled || currentIdx >= languages.length) return;

        const entry = languages[currentIdx];
        const total = languages.length;
        const isLast       = currentIdx === total - 1;
        const isSecondLast = currentIdx === total - 2;
        const isThirdLast  = currentIdx === total - 3;

        // Fade out
        mainText.style.opacity = "0";
        langLabel.style.opacity = "0";
        flagEl.style.opacity = "0";
        await new Promise(r => setTimeout(r, 350));
        if (cancelled) return;

        // Set new
        flagEl.textContent = entry.flag;
        flagEl.style.opacity = "1";
        langLabel.textContent = entry.lang;
        langLabel.style.opacity = "1";
        mainText.style.opacity = "1";
        counter.textContent = (currentIdx + 1) + " / " + total;

        const speed = (isLast || isSecondLast || isThirdLast) ? 90 : 55;

        // Final English — bigger, pink, glow
        if (isLast) {
          mainText.style.fontSize = "clamp(2.8rem, 7vw, 5rem)";
          mainText.style.color = "#ff6090";
          mainText.style.textShadow = "0 0 40px rgba(255,80,130,0.7), 0 0 80px rgba(255,50,100,0.3)";
          langLabel.style.color = "rgba(255, 200, 220, 0.7)";
          glow.classList.add("active");
        }

        await typeText(entry.text, mainText, speed);
        if (cancelled) return;

        const holdTime = isLast ? 3500 : (isSecondLast || isThirdLast) ? 2200 : 1400;
        await new Promise(r => setTimeout(r, holdTime));
        if (cancelled) return;

        currentIdx++;

        if (currentIdx < languages.length) {
          showNext();
        } else {
          // Finished — show closing message then navigate
          counter.textContent = "\u2665 in every language, my love is yours \u2665";
          counter.style.color = "rgba(255, 150, 180, 0.5)";
          counter.style.fontSize = "0.72rem";
          skipBtn.style.display = "none";

          await new Promise(r => setTimeout(r, 3000));
          if (!cancelled) goToNextPage();
        }
      };

      // Start the sequence
      setTimeout(showNext, 1200);
    </script>
  </body>
</html>
